webpackJsonp([90],{EbxC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("oIG2"),o=n.n(i),a=n("M/w6"),s=n.n(a),c=n("M1VO"),l=n.n(c),r=n("Jmof"),u=n.n(r),d=n("j9xI"),h=n.n(d),f=n("YQkk"),p=n("TJHO"),k=n("J0ge"),m=n("vqxZ"),g=n("2s4c"),y=(Object.assign({},f.d),{ESC:"Escape"}),b=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.timeEntered=0,n.loadedForLocation=null,n.showCommunityCenterLink=o.a.current().can_see_community_links,n.state={shouldLogCommunityCenterImpression:n.showCommunityCenterLink,shouldLogFieldGuidePhoneImpression:!0,shouldLogFooterPhoneImpression:!0,isSticky:!1},n.loadPanelData=n.loadPanelData.bind(n),n.onClosePanelClick=n.onClosePanelClick.bind(n),n.onDocumentClick=n.onDocumentClick.bind(n),n.onToggle=n.onToggle.bind(n),n.setPanelRef=n.setPanelRef.bind(n),n.inExperiment=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){return function(){l.a.on(g.a.FIELD_GUIDE_TOGGLE,this.onToggle);var e=document.getElementsByClassName("js-help-toggle")[0];e&&e.addEventListener("click",this.onToggle)}}()},{key:"componentDidUpdate",value:function(){return function(){var e=this;this.focusRequired&&this.panel&&(setTimeout(function(){e.panel.focus()},0),this.focusRequired=!1)}}()},{key:"componentWillUnmount",value:function(){return function(){l.a.off(g.a.FIELD_GUIDE_TOGGLE,this.onToggle),this.cleanUpAfterStickyState()}}()},{key:"onToggle",value:function(){return function(e){return h.a.queueEvent({event_name:"px_help_button",event_data:{section:"field_guide",operation:"click",datadog_key:"px_help_button.click",datadog_tags:"section:field_guide"}}),this.loadPanelData(),null===this.state.showHelpFeedbackLink&&this.setState({showHelpFeedbackLink:this.isInSubmitFeedbackLinkExperiment()}),this.state.isSticky?this.setNonsticky():this.setSticky(),void 0!==e&&e.preventDefault(),!1}}()},{key:"onClosePanelClick",value:function(){return function(){m.a.resetExpandedTopics(),this.setNonsticky()}}()},{key:"onDocumentClick",value:function(){return function(e){this.state.isSticky&&(this.panel.contains(e.target)||this.setNonsticky())}}()},{key:"setPanelRef",value:function(){return function(e){this.panel=e}}()},{key:"setSticky",value:function(){return function(){document.addEventListener("click",this.onDocumentClick,!0),this.setState({isSticky:!0}),this.logPanelImpressions(),this.focusRequired=!0}}()},{key:"setNonsticky",value:function(){return function(){this.cleanUpAfterStickyState(),this.state.isSticky&&this.timeEntered&&m.a.logPanelViewTime(Date.now()-this.timeEntered),this.setState({isSticky:!1})}}()},{key:"cleanUpAfterStickyState",value:function(){return function(){document.removeEventListener("click",this.onDocumentClick,!0)}}()},{key:"logPanelImpressions",value:function(){return function(){this.timeEntered=Date.now(),this.logCommunityCenterImpression()}}()},{key:"loadPanelData",value:function(){return function(){this.shouldFetchData()&&(this.loadedForLocation=window.location.href,m.a.fetchData(),o.a.isLoggedIn()&&m.a.getUserIssuePrediction("field_guide"))}}()},{key:"logCommunityCenterImpression",value:function(){return function(){this.state.shouldLogCommunityCenterImpression&&(h.a.logEvent({event_name:"community_center_link",event_data:{operation:"impression",page:"nav_bar",section:"help_dropdown"}}),this.setState({shouldLogCommunityCenterImpression:!1}))}}()},{key:"shouldFetchData",value:function(){return function(){return this.loadedForLocation!==window.location.href}}()},{key:"render",value:function(){return function(){if(!this.state.isSticky)return null;var e=this.props,t=e.css,n=e.styles;return u.a.createElement(p.a,{keyName:y.ESC,handler:this.onClosePanelClick},u.a.createElement("div",{className:this.state.isSticky?"skinny-help-side-panel-sticky":""},u.a.createElement("div",babelHelpers.extends({ref:this.setPanelRef},t(n.fieldGuide,this.state.isSticky&&n.sticky),{tabIndex:"-1",role:"region","aria-label":s.a.t("help.Airbnb Help")}),u.a.createElement(k.a,{captureScrolling:this.state.isSticky,onClosePanelClick:this.onClosePanelClick,showCommunityCenterLink:this.showCommunityCenterLink,showHelpFeedbackLink:this.state.showHelpFeedbackLink}))))}}()}]),t}(u.a.Component);t.default=Object(f.c)(function(e){return{sticky:{display:"block"},fieldGuide:{width:"350px",position:"fixed",zIndex:3001,lineHeight:"normal",borderRadius:"0 0 2px 2px",boxShadow:"-3px 0 3px 0 rgba(0, 0, 0, 0.05)",top:0,right:0,bottom:0,display:"none",background:e.color.white}}})(b)},J0ge:function(e,t,n){"use strict";t.a=function(e){return o.a.createElement(a.b,babelHelpers.extends({loader:s},e))};var i=n("Jmof"),o=n.n(i),a=n("uS/C");function s(){return(e=new Promise(function(e){n.e(946).then(function(t){e(babelHelpers.interopRequireWildcard(n("gXE8")))}.bind(null,n)).catch(n.oe)}),t="field_guide-ArticleAccordian_async",e.chunkName=t,e).then(function(e){return e.default||e});var e,t}},"T6/H":function(e,t,n){"use strict";var i=n("r3wS"),o=n.n(i);t.a=new o.a({deserialize:function(e){return"string"==typeof e?JSON.parse(e):e}})},vqxZ:function(e,t,n){"use strict";var i=n("lQnl"),o=n.n(i),a=n("t7ak"),s=n.n(a),c=n("T6/H"),l=function(){function e(){babelHelpers.classCallCheck(this,e),this.generateActions("setLoadingArticle","setLoadingTopic","resetCurrentArticle","logHelpCenterClick","addTopicTitle","logPanelViewTime","logSearchUsage","fetchDataSucceeded","fetchDataFailed","getUserIssuePrediction","toggleTopicInExpandedTopics","resetExpandedTopics")}return babelHelpers.createClass(e,[{key:"fetchData",value:function(){return function(){var e=this;this.actions.setLoadingTopic(!0),s.a.get("/help/dropdown",{window_location:window.location.href}).then(function(t){e.actions.fetchDataSucceeded(t),e.actions.setLoadingTopic(!1)},function(){e.actions.fetchDataFailed(),e.actions.setLoadingTopic(!1)})}}()},{key:"fetchArticle",value:function(){return function(e){var t=this;this.actions.setLoadingArticle(!0),o.a.get("/v1/help/faq/"+String(e)).then(function(e){t.dispatch(e.faq)},function(){t.dispatch({id:e})}).then(function(){t.actions.setLoadingArticle(!1)},function(){t.actions.setLoadingArticle(!1)})}}()},{key:"showArticle",value:function(){return function(e){this.dispatch({id:e,isInitial:!1})}}()}]),e}();t.a=c.a.createActions(l)}});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/FieldGuide-async-async-c3c38399d080ac13165c.js.map