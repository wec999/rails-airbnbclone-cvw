webpackJsonp([982],{"1Nuf":function(e,t,n){"use strict";var i=n("yu5W"),a=n.n(i),o=n("Jmof"),s=n.n(o),r=n("C7vi"),l=n.n(r),c=n("M/w6"),u=n.n(c),d=n("kUb7"),h=n.n(d),m=n("KQuW"),p=n("Zn73"),b=(n.n(p),n("YQkk")),f=n("lVmX"),g=n("zV6F"),v=n("ilZ4"),P=n("+/1D"),y=n("M10m"),E=(Object.assign({},b.d,{activePhotoIndex:a.a.number,listingId:a.a.number.isRequired,listingName:a.a.string,pdpPageTypeForLogging:a.a.oneOf(Object.values(f.a)).isRequired,photos:a.a.arrayOf(v.a),showThumbnails:a.a.bool,thumbnailPressed:a.a.func.isRequired}),function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={thumbnailsSlidePanelStyle:{}},n.thumbnails={},n.handleThumbnailPress=n.handleThumbnailPress.bind(n),n.setThumbnailRef=n.setThumbnailRef.bind(n),n.setThumbnailsViewportRef=n.setThumbnailsViewportRef.bind(n),n.setThumbnailsSlidePanelRef=n.setThumbnailsSlidePanelRef.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillReceiveProps",value:function(){return function(e){var t=e.activePhotoIndex;if(this.thumbnailsViewport&&this.thumbnailsSlidePanel&&this.thumbnails[t]&&this.props.activePhotoIndex!==t){var n=this.thumbnailsViewport.offsetWidth,i=this.thumbnailsSlidePanel.offsetWidth,a=this.thumbnails[t],o=a.offsetLeft+a.offsetWidth/2,s=Math.min(n/2-o,0),r=Math.min(0,n-i);this.setState({thumbnailsSlidePanelStyle:{transform:"translateX("+String(Math.max(s,r))+"px)"}})}}}()},{key:"setThumbnailsViewportRef",value:function(){return function(e){this.thumbnailsViewport=e}}()},{key:"setThumbnailsSlidePanelRef",value:function(){return function(e){this.thumbnailsSlidePanel=e}}()},{key:"setThumbnailRef",value:function(){return function(e,t){this.thumbnails[t]=e}}()},{key:"handleThumbnailPress",value:function(){return function(e){var t=this.props,n=t.activePhotoIndex,i=t.listingId,a=t.pdpPageTypeForLogging,o=t.thumbnailPressed,s=parseInt(e.currentTarget.getAttribute("data-photo-index"),10);Object(y.c)(i,y.a.CLICK,a,y.b.THUMBNAIL,n),o(s)}}()},{key:"render",value:function(){return function(){var e=this,t=this.props,n=t.css,i=t.activePhotoIndex,a=t.listingName,o=t.onHidePhotoListPress,r=t.onShowPhotoListPress,c=t.photos,d=t.showThumbnails,m=t.styles,p=this.state.thumbnailsSlidePanelStyle,b=c[i]||{},f=b.caption||a;return s.a.createElement(g.a,{bottom:3},s.a.createElement("div",n(m.outerContainer),s.a.createElement("div",n(m.innerContainer,!d&&m.innerContainer_collapsed),s.a.createElement(g.a,{bottom:1.5},s.a.createElement("div",n(m.headerContainer),s.a.createElement("div",n(m.leftCaption),s.a.createElement(h.a,{k:"progress_indicator_caption",numerator:i+1,denominator:c.length,caption:f}),b&&b.is_professional&&s.a.createElement("div",null,s.a.createElement("i",{className:"text-muted"},s.a.createElement(h.a,{k:"rooms_verified_photo"})))),s.a.createElement("div",n(m.rightCaption),s.a.createElement("button",{className:"hide-sm btn-link btn-link--icon",onClick:d?o:r},d?s.a.createElement("span",null,s.a.createElement(h.a,{k:"rooms_hide_photo_list"}),s.a.createElement("i",{className:"icon icon-caret-down"})):s.a.createElement("span",null,s.a.createElement(h.a,{k:"rooms_show_photo_list"}),s.a.createElement("i",{className:"icon icon-caret-up"})))))),s.a.createElement("div",babelHelpers.extends({},n(m.thumbnailsOuterContainer),{ref:this.setThumbnailsViewportRef,"aria-hidden":!d}),s.a.createElement("div",n(m.thumbnailsInnerContainer),s.a.createElement("ul",babelHelpers.extends({ref:this.setThumbnailsSlidePanelRef},n(m.slidePanel,Object.assign({},p))),c.map(function(t,o){var r=t.caption,h=t.thumbnail,p=l()("media-photo media-slideshow btn-link btn-link--reset",{active:i===o});return s.a.createElement("li",babelHelpers.extends({},n(m.thumbnailContainer,o>0&&m.thumbnailContainerLeftMargin),{key:h}),s.a.createElement("button",{"aria-label":u.a.t("progress_indicator_caption",{numerator:o+1,denominator:c.length,caption:r||a}),className:p,"data-photo-index":o,disabled:!d,onClick:e.handleThumbnailPress,ref:function(t){e.setThumbnailRef(t,o)}},s.a.createElement("img",babelHelpers.extends({alt:r||a,src:h},n(m.thumbnailPhoto)))))})))))))}}()}]),t}(s.a.Component));E.defaultProps={activePhotoIndex:0,listingName:"",photos:[],showThumbnails:!1},t.a=Object(p.compose)(Object(m.a)(null,{thumbnailPressed:P.i}),Object(b.c)(function(e){return{outerContainer:{overflow:"hidden",maxWidth:"105vh",marginLeft:"auto",marginRight:"auto"},innerContainer:{marginLeft:"auto",marginRight:"auto",position:"relative",transform:"translateY(0)",transition:"transform 0.2s ease-out"},innerContainer_collapsed:{transform:"translateY(67px)"},headerContainer:{display:"table",width:"100%"},leftCaption:{textAlign:"left",verticalAlign:"middle",display:"table-cell"},rightCaption:{textAlign:"right",verticalAlign:"middle",display:"table-cell"},thumbnailsOuterContainer:{position:"relative",overflow:"hidden",height:67},thumbnailsInnerContainer:{position:"absolute",width:11110},thumbnailPhoto:{width:100,height:67},thumbnailContainer:{float:"left",backgroundColor:e.color.black},thumbnailContainerLeftMargin:{marginLeft:10},slidePanel:{position:"absolute",transition:"transform 0.3s ease-out",listStyleType:"none",margin:0,padding:0,left:0}}}))(E)},"6jGy":function(e,t,n){"use strict";var i=n("yu5W"),a=n.n(i),o=n("Jmof"),s=n.n(o),r=n("M/w6"),l=n.n(r),c=n("MRiB"),u=(n.n(c),n("KQuW")),d=n("Zn73"),h=(n.n(d),n("YQkk")),m=n("lVmX"),p=n("pTNb"),b=n("ilZ4"),f=n("vJ9l"),g=n("+/1D"),v=n("M10m"),P=n("qppT"),y=(Object.assign({},h.d,{activePhotoIndex:a.a.number,activePhotoPressed:a.a.func.isRequired,direction:a.a.oneOf([f.a,f.b]),leftKeyPressed:a.a.func.isRequired,listingId:a.a.number.isRequired,pdpPageTypeForLogging:a.a.oneOf(Object.values(m.a)).isRequired,nextButtonPressed:a.a.func.isRequired,photos:a.a.arrayOf(b.a),preloadSize:a.a.number,prevButtonPressed:a.a.func.isRequired,rightKeyPressed:a.a.func.isRequired}),{activePhotoIndex:0,direction:f.b,photos:[],preloadSize:1}),E=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handlePrevButtonPress=n.handlePrevButtonPress.bind(n),n.handleNextButtonPress=n.handleNextButtonPress.bind(n),n.handleActiveImagePress=n.handleActiveImagePress.bind(n),n.handleKeydown=n.handleKeydown.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handlePrevButtonPress",value:function(){return function(){var e=this.props,t=e.activePhotoIndex,n=e.listingId,i=e.pdpPageTypeForLogging,a=e.photos,o=e.prevButtonPressed;Object(v.c)(n,v.a.CLICK,i,v.b.PREV_BUTTON,t),o(a)}}()},{key:"handleNextButtonPress",value:function(){return function(){var e=this.props,t=e.activePhotoIndex,n=e.listingId,i=e.nextButtonPressed,a=e.pdpPageTypeForLogging,o=e.photos;Object(v.c)(n,v.a.CLICK,a,v.b.NEXT_BUTTON,t),i(o)}}()},{key:"handleActiveImagePress",value:function(){return function(){var e=this.props,t=e.activePhotoIndex,n=e.activePhotoPressed,i=e.listingId,a=e.pdpPageTypeForLogging,o=e.photos;Object(v.c)(i,v.a.CLICK,a,v.b.SLIDESHOW_IMAGE,t),n(o)}}()},{key:"handleKeydown",value:function(){return function(e){var t=this.props,n=t.activePhotoIndex,i=t.leftKeyPressed,a=t.listingId,o=t.pdpPageTypeForLogging,s=t.photos,r=t.rightKeyPressed;switch(e.which){case 37:Object(v.c)(a,v.a.KEYPRESS,o,v.b.KEYBOARD_LEFT,n),i(s);break;case 39:Object(v.c)(a,v.a.KEYPRESS,o,v.b.KEYBOARD_RIGHT,n),r(s)}}}()},{key:"renderPreloadedImages",value:function(){return function(){var e=this.props,t=e.css,n=e.photos,i=e.preloadSize,a=e.activePhotoIndex,o=e.styles,r=a+1,l=n.slice(r,r+i);return s.a.createElement("div",t(o.hide),l.map(function(e){return s.a.createElement("img",{key:e.x_large,src:e.x_large,alt:""})}))}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.css,n=e.activePhotoIndex,i=e.direction,a=e.photos,o=e.styles,r=a[n]||{},u=a[n]&&a[n].caption?a[n].caption:"",d=0===n?r.xx_large:r.x_large,h="Slideshow__image-transition--"+String(i);return s.a.createElement("div",t(o.outerContainer),s.a.createElement(p.a,{target:document,type:"keydown",onEvent:this.handleKeydown}),s.a.createElement("button",babelHelpers.extends({type:"button","aria-label":l.a.t("shared_previous"),onClick:this.handlePrevButtonPress},t(o.chevron,o.chevron_left)),s.a.createElement("i",{className:"icon icon-chevron-left icon-size-4 text-contrast"})),s.a.createElement("button",babelHelpers.extends({type:"button"},t(o.chevron,o.chevron_right),{"aria-label":l.a.t("shared_next"),onClick:this.handleNextButtonPress}),s.a.createElement("i",{className:"icon icon-chevron-right icon-size-4 text-contrast"})),s.a.createElement("div",t(o.innerContainer),s.a.createElement("div",t(o.intrinsicOuterContainer),s.a.createElement("div",t(o.intrinsicInnerContainer),s.a.createElement("ul",{className:"Slideshow__images"},s.a.createElement("li",{className:"media-photo media-photo-block text-center media-cover text-center"},s.a.createElement(c.CSSTransitionGroup,{transitionName:h,transitionEnterTimeout:150,transitionLeaveTimeout:150},s.a.createElement("img",{key:d,onClick:this.handleActiveImagePress,src:d,alt:u})))),this.renderPreloadedImages()))))}}()}]),t}(s.a.Component);E.defaultProps=y,t.a=Object(d.compose)(Object(h.c)(function(e){var t=e.responsive;return{outerContainer:{position:"relative"},innerContainer:{width:"100%",maxWidth:"105vh",margin:"0 auto"},intrinsicOuterContainer:babelHelpers.defineProperty({position:"relative",width:"100%",height:"0",paddingBottom:"75%"},t.mediumAndAbove,{paddingBottom:"67%"}),intrinsicInnerContainer:{position:"absolute",top:0,right:0,bottom:0,left:0,width:"100%",height:"100%"},chevron:babelHelpers.defineProperty({background:"none",border:0,cursor:"pointer",outline:"none",position:"absolute",top:0,height:"100%",zIndex:P.c,fontSize:"0.5em",width:40},t.largeAndAbove,{width:75,fontSize:"medium"}),chevron_left:{left:0},chevron_right:{right:0},hide:{display:"none"}}}),Object(u.a)(null,{activePhotoPressed:g.a,leftKeyPressed:g.e,nextButtonPressed:g.f,prevButtonPressed:g.g,rightKeyPressed:g.h}))(E)},F6yB:function(e,t,n){"use strict";var i=n("yu5W"),a=n.n(i),o=n("Jmof"),s=n.n(o),r=n("bnGD"),l=n.n(r),c=n("MRiB"),u=(n.n(c),n("YQkk")),d=n("lVmX"),h=n("ZIPb"),m=n("ilZ4"),p=n("6jGy"),b=n("1Nuf"),f=n("vJ9l"),g=n("qppT"),v=2e3,P=(Object.assign({},u.d,{activePhotoIndex:a.a.number,listing:h.a.isRequired,pdpPageTypeForLogging:a.a.oneOf(Object.values(d.a)).isRequired,photos:a.a.arrayOf(m.a),preloadSize:a.a.number,slideshowDirection:a.a.oneOf([f.a,f.b])}),{activePhotoIndex:0,listing:null,photos:[],preloadSize:1,slideshowDirection:f.b}),y=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showThumbnails:!1,photosTabControlWidth:null,locationTabControlWidth:null},n.hideThumbnails=n.hideThumbnails.bind(n),n.showThumbnails=n.showThumbnails.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentWillMount",value:function(){return function(){l.a.is("sm")||this.setState({showThumbnails:!0})}}()},{key:"componentDidMount",value:function(){return function(){this.state.showThumbnails&&this.setUpHideThumbnailsTimeout()}}()},{key:"componentWillUnmount",value:function(){return function(){this.hideThumbnailsTimeout&&clearTimeout(this.hideThumbnailsTimeout)}}()},{key:"setUpHideThumbnailsTimeout",value:function(){return function(){var e=this;this.hideThumbnailsTimeout=setTimeout(function(){e.hideThumbnails()},v)}}()},{key:"showThumbnails",value:function(){return function(){this.hideThumbnailsTimeout&&(clearTimeout(this.hideThumbnailsTimeout),this.hideThumbnailsTimeout=null),this.setState({showThumbnails:!0})}}()},{key:"hideThumbnails",value:function(){return function(){this.setState({showThumbnails:!1})}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.css,n=e.activePhotoIndex,i=e.listing,a=e.pdpPageTypeForLogging,o=e.photos,r=e.preloadSize,l=e.slideshowDirection,u=e.styles;return s.a.createElement("div",t(u.container),s.a.createElement("div",t(u.topContainer),s.a.createElement("div",t(u.controls))),s.a.createElement("div",t(u.tab),s.a.createElement(c.CSSTransitionGroup,{transitionName:"SlideshowModalContent__tab-transition",transitionEnterTimeout:200,transitionLeaveTimeout:150},s.a.createElement(p.a,{activePhotoIndex:n,direction:l,listingId:i.id,pdpPageTypeForLogging:a,photos:o,preloadSize:r}),s.a.createElement("figcaption",babelHelpers.extends({},t(u.footer),{onMouseEnter:this.showThumbnails}),s.a.createElement(b.a,{activePhotoIndex:n,listingId:i.id,listingName:i.name,onHidePhotoListPress:this.hideThumbnails,onShowPhotoListPress:this.showThumbnails,pdpPageTypeForLogging:a,photos:o,showThumbnails:this.state.showThumbnails})))))}}()}]),t}(s.a.Component);y.defaultProps=P,t.a=Object(u.c)(function(e){var t=e.color;return{container:{display:"table",width:"100%",height:"100%"},topContainer:{display:"table-row"},controls:{padding:"66px 15px 20px"},tab:{display:"table-row",height:"100%"},footer:{overflow:"hidden",backgroundImage:"none",backgroundColor:"transparent",paddingBottom:"25px 15px 0px 15px",borderRadius:0,position:"absolute",right:0,bottom:0,left:0,zIndex:g.b,textAlign:"center",color:t.white}}})(y)},jPO3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("yu5W"),a=n.n(i),o=n("Jmof"),s=n.n(o),r=n("cJdC"),l=n("M/w6"),c=n.n(l),u=n("TJHO"),d=n("U/Dj"),h=n("YcOS"),m=n("9TAG"),p=n("hdyc"),b=n("MRiB"),f=(n.n(b),n("KQuW")),g=n("Zn73"),v=(n.n(g),n("lVmX")),P=n("kUb7"),y=n.n(P),E=n("YQkk"),T=n("ZIPb"),C=n("ilZ4"),w=n("F6yB"),x=n("vJ9l"),_=n("+/1D"),S=n("M10m"),k=n("rdYt"),O=n("lnof"),I=n("ajdO"),R={ESC:"Escape"};Object.assign({},I.e,E.d,{activePhotoIndex:a.a.number,closeButtonPressed:a.a.func.isRequired,escKeyPressed:a.a.func.isRequired,isModalVisible:a.a.bool,listing:T.a.isRequired,pdpPageTypeForLogging:a.a.oneOf(Object.values(v.a)).isRequired,photos:a.a.arrayOf(C.a),preloadSize:a.a.number,slideshowDirection:a.a.oneOf([x.a,x.b])});var L={activePhotoIndex:0,isModalVisible:!1,photos:[],preloadSize:1,pricingQuote:null,slideshowDirection:x.b},M=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleEscKeyPress=n.handleEscKeyPress.bind(n),n.handleCloseButtonPress=n.handleCloseButtonPress.bind(n),n.setModalRef=n.setModalRef.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"componentDidMount",value:function(){return function(){Object(O.a)(k.a.get("p3/slideshow_modal")),this.toggleModalState(this.props.isModalVisible)}}()},{key:"componentWillReceiveProps",value:function(){return function(e){e.isModalVisible!==this.props.isModalVisible&&this.toggleModalState(e.isModalVisible)}}()},{key:"setModalRef",value:function(){return function(e){this.modalRef=e}}()},{key:"handleEscKeyPress",value:function(){return function(){var e=this.props,t=e.listing,n=e.escKeyPressed,i=e.pdpPageTypeForLogging;Object(S.c)(t.id,S.a.KEYPRESS,i,S.b.SLIDESHOW_CLOSE),n()}}()},{key:"handleCloseButtonPress",value:function(){return function(){var e=this.props,t=e.listing,n=e.closeButtonPressed,i=e.pdpPageTypeForLogging;Object(S.c)(t.id,S.a.CLICK,i,S.b.SLIDESHOW_CLOSE),n()}}()},{key:"toggleModalState",value:function(){return function(e){var t=this;e?(document.body.style.overflow="hidden",this.lastActiveElement=document.activeElement,this.openTimeout=setTimeout(function(){t.openTimeout=null,t.modalRef&&t.modalRef.focus()},0)):this.lastActiveElement&&(document.body.style.overflow="",this.lastActiveElement.focus()),document.body.classList.toggle("slideshow-open",e)}}()},{key:"renderInitialPreloadedImages",value:function(){return function(){var e=this.props,t=e.photos,n=e.preloadSize,i=e.activePhotoIndex+1,a=t.slice(i,i+n);return s.a.createElement("div",{className:"SlideshowModal__slideshow-preload hide"},a.map(function(e,t){return s.a.createElement("img",{key:String(e.x_large)+"/"+String(t),src:e.x_large,alt:""})}))}}()},{key:"render",value:function(){return function(){var e=this.props,t=e.activePhotoIndex,n=e.isModalVisible,i=e.listing,a=e.pdpPageTypeForLogging,o=e.photos,l=e.preloadSize,f=e.slideshowDirection,g=e.experiments.showHotelDisclaimer,v=e.styles,P=e.css;return s.a.createElement("div",null,s.a.createElement(d.a,{isOpened:n},s.a.createElement("div",null,s.a.createElement(u.a,{keyName:R.ESC,handler:this.handleEscKeyPress},n&&this.renderInitialPreloadedImages(),s.a.createElement(b.CSSTransitionGroup,{transitionName:"SlideshowModal__transition",transitionAppear:!0,transitionAppearTimeout:1e3,transitionEnter:!1,transitionLeave:!1},s.a.createElement("div",{className:"SlideshowModal modal-container"},s.a.createElement("div",{className:"modal-table"},s.a.createElement("div",{className:"modal-cell"},s.a.createElement("div",{className:"modal-content",ref:this.setModalRef,role:"dialog",tabIndex:-1},s.a.createElement(r.a,null,s.a.createElement("button",{"aria-label":c.a.t("shared_close"),className:"SlideshowModal__close btn icon icon-remove",onClick:this.handleCloseButtonPress,type:"button"}),g&&s.a.createElement("div",P(v.hotelDisclaimerContainer),s.a.createElement(p.b,{fillHorizontal:!0,fillVertical:!0},s.a.createElement(m.a,{middle:!0},s.a.createElement(h.a,{inverse:!0,small:!0,light:!0},s.a.createElement(y.a,{k:"p3_hotel_photo_carousel_disclaimer"}))))),s.a.createElement(w.a,{activePhotoIndex:t,pdpPageTypeForLogging:a,photos:o,slideshowDirection:f,listing:i,preloadSize:l})))))))))))}}()}]),t}(s.a.Component);M.defaultProps=L,t.default=Object(g.compose)(Object(f.a)(function(e){var t=e.homePDP.slideshow;return{isModalVisible:t.isModalVisible,activePhotoIndex:t.activePhotoIndex,slideshowDirection:t.slideshowDirection}},{escKeyPressed:_.c,closeButtonPressed:_.b}),Object(I.a)({showHotelDisclaimer:Object(I.b)({experimentName:"p3_hotel_photo_carousel_disclaimer",experimentEnabled:function(){return function(e){return e.listing.is_representative_inventory}}(),treatmentSnippets:{control:function(){return function(){return!1}}(),treatment:function(){return function(){return!0}}(),treatment_unknown:function(){return function(){return!1}}()},shouldLogSelector:function(){return function(e){return e.isModalVisible}}()})}),Object(E.c)(function(){return{hotelDisclaimerContainer:{top:0,left:0,textAlign:"center",position:"absolute",width:"100%",height:90,padding:"0 80px"}}}))(M)}});
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/MarketplacePDP-SlideshowModal-async-3e934f61f0f70b302f82.js.map